(一)注意事项
1.keil项目路径MDK-ARM->DJ_A_wheel.uvprojx
2.芯片stm32F427IIH
3.不要随便动主分支,可以自己加一个分支.在push前先抓取远程提交把远程仓库里的更改先同步到自己的文件里后再提交push
4.最好在vscode里写代码,在keil里调试
5.如果遇到报错可以打开.ioc文件重新生成代码
(二)必备插件链接链接
1.hal库项目文件管理插件
https://marketplace.visualstudio.com/items?itemName=stmicroelectronics.stm32-vscode-extension
2.cmake需要下
https://marketplace.visualstudio.com/items?itemName=ms-vscode.cmake-tools
3.vscode中文插件
https://marketplace.visualstudio.com/items?itemName=MS-CEINTL.vscode-language-pack-zh-hans
(三)控制逻辑
(1)已实现
1.在tim3中断回调函数里计算pid和发送can报文
2.遥控器串口在uart1,接收中断里调用了一个自己写的接收回调函数将uart1对应的dma数据接收并传到几个全局变量里
(2)未实现,中期考核前必须实现的功能
1.将遥控器的拨杆改成功能按键,至少4个
2.3508电机串级pid控角度的多圈转动
3.发球准备,发球,击球
4.舵机对球的限位
(四)资源分配
1.tim3中断作速度环的更新处理
2.tim14中断作角度环的更新处理
3.uart1作为遥控器接收接口
4.uart2作为串口打印接口
5.i2c1后续挂载陀螺仪
6.can1控制底盘电机
7.can2控制机械臂等,有一个陀螺仪也用can
(五)DT7遥控器各通道对应
1.右摇杆,左右对应ch[0].上下对应ch2[1]
2.左摇杆,左右对应ch[2].上下对应ch[3],最下有限位可做为击球
3.左上角滚轮对应ch[4]
4.右上拨杆对应s[0],上中下值分别为1,3,2
5.左上拨杆对应s[1],上中下值分别为1,3,2